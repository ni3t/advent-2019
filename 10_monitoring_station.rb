@answer1 = nil
@answer2 = nil

input = DATA.each_line.first(5).map(&:strip).map do |line|
  line.split("")
end


ff = []
aa = []

input.map.with_index do |row,y1|
  row.map.with_index do |cell,x1|
    next unless cell == "#"
    founds = []
    a = []
    input.map.with_index do |row2,y2|
      row2.map.with_index do |cell2,x2|
        next unless cell2 == "#"
        next if x1 == x2 && y1 == y2
          rise = y1.to_f - y2.to_f
          run = x2.to_f - x1.to_f
          angle = rise / run
          magnitude = rise ** 2 + run ** 2
        if y2 == y1
          # on the horiz
          if x2 > x1
            founds << "right"
          else
            founds << "left"
          end  
        elsif x2 == x1
          # on the vert
          if y2 > y1
            founds << "below"
          else
            founds << "above"
          end
        elsif y2 < y1
          #above horiz
          founds << "u#{angle}"[0..10]
        else
          #below horiz
          founds << "d#{angle}"[0..10]
        end
      end
    end
    pp [x1,y1,founds]
    ff << [x1,y1,founds.uniq.size]
  end
end

puts ff.max_by(&:last).last


__END__
.#....#####...#..
##...##.#####..##
##...#...#.#####.
..#.....#...###..
..#.#.....#....##

.#..#..##.#...###.#............#.
.....#..........##..#..#####.#..#
#....#...#..#.......#...........#
.#....#....#....#.#...#.#.#.#....
..#..#.....#.......###.#.#.##....
...#.##.###..#....#........#..#.#
..#.##..#.#.#...##..........#...#
..#..#.......................#..#
...#..#.#...##.#...#.#..#.#......
......#......#.....#.............
.###..#.#..#...#..#.#.......##..#
.#...#.................###......#
#.#.......#..####.#..##.###.....#
.#.#..#.#...##.#.#..#..##.#.#.#..
##...#....#...#....##....#.#....#
......#..#......#.#.....##..#.#..
##.###.....#.#.###.#..#..#..###..
#...........#.#..#..#..#....#....
..........#.#.#..#.###...#.....#.
...#.###........##..#..##........
.###.....#.#.###...##.........#..
#.#...##.....#.#.........#..#.###
..##..##........#........#......#
..####......#...#..........#.#...
......##...##.#........#...##.##.
.#..###...#.......#........#....#
...##...#..#...#..#..#.#.#...#...
....#......#.#............##.....
#......####...#.....#...#......#.
...#............#...#..#.#.#..#.#
.#...#....###.####....#.#........
#.#...##...#.##...#....#.#..##.#.
.#....#.###..#..##.#.##...#.#..##
